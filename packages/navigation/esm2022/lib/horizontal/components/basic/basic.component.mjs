import { NgClass, NgTemplateOutlet } from '@angular/common';
import { ChangeDetectionStrategy, Component, Input, } from '@angular/core';
import { RouterLink, RouterLinkActive } from '@angular/router';
import { SvgIconModule } from '@libs/svg-icon';
import { Subject, takeUntil } from 'rxjs';
import { UtilsHelper } from '../../../utils.helper';
import * as i0 from "@angular/core";
import * as i1 from "../../../navigation.service";
import * as i2 from "@libs/svg-icon";
export class HorizontalNavigationBasicItemComponent {
    _changeDetectorRef;
    _navigationService;
    item;
    name;
    isActiveMatchOptions;
    _horizontalNavigationComponent;
    _unsubscribeAll = new Subject();
    constructor(_changeDetectorRef, _navigationService) {
        this._changeDetectorRef = _changeDetectorRef;
        this._navigationService = _navigationService;
        // Set the equivalent of {exact: false} as default for active match options.
        // We are not assigning the item.isActiveMatchOptions directly to the
        // [routerLinkActiveOptions] because if it's "undefined" initially, the router
        // will throw an error and stop working.
        this.isActiveMatchOptions = UtilsHelper.subsetMatchOptions;
    }
    // -----------------------------------------------------------------------------------------------------
    // @ Lifecycle hooks
    // -----------------------------------------------------------------------------------------------------
    ngOnInit() {
        // Set the "isActiveMatchOptions" either from item's
        // "isActiveMatchOptions" or the equivalent form of
        // item's "exactMatch" option
        this.isActiveMatchOptions =
            (this.item.isActiveMatchOptions ?? this.item.exactMatch)
                ? UtilsHelper.exactMatchOptions
                : UtilsHelper.subsetMatchOptions;
        // Get the parent navigation component
        this._horizontalNavigationComponent = this._navigationService.getComponent(this.name);
        // Mark for check
        this._changeDetectorRef.markForCheck();
        // Subscribe to onRefreshed on the navigation component
        this._horizontalNavigationComponent.onRefreshed
            .pipe(takeUntil(this._unsubscribeAll))
            .subscribe(() => {
            // Mark for check
            this._changeDetectorRef.markForCheck();
        });
    }
    ngOnDestroy() {
        this._unsubscribeAll.next(null);
        this._unsubscribeAll.complete();
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: HorizontalNavigationBasicItemComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i1.NavigationService }], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.13", type: HorizontalNavigationBasicItemComponent, isStandalone: true, selector: "horizontal-navigation-basic-item", inputs: { item: "item", name: "name" }, ngImport: i0, template: "<!-- Item wrapper -->\n<div\n  class=\"horizontal-navigation-item-wrapper\"\n  [class.horizontal-navigation-item-has-subtitle]=\"!!item.subtitle\"\n  [ngClass]=\"item.classes?.wrapper\"\n>\n  <!-- Item with an internal link -->\n  @if (item.link && !item.externalLink && !item.function && !item.disabled) {\n    <div\n      class=\"horizontal-navigation-item\"\n      [ngClass]=\"{ 'horizontal-navigation-item-active-forced': item.active }\"\n      [routerLink]=\"[item.link]\"\n      [fragment]=\"item.fragment\"\n      [preserveFragment]=\"item.preserveFragment ?? false\"\n      [queryParams]=\"item.queryParams\"\n      [queryParamsHandling]=\"item.queryParamsHandling\"\n      [routerLinkActive]=\"'horizontal-navigation-item-active'\"\n      [routerLinkActiveOptions]=\"isActiveMatchOptions\"\n    >\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </div>\n  }\n\n  <!-- Item with an external link -->\n  @if (item.link && item.externalLink && !item.function && !item.disabled) {\n    <a\n      class=\"horizontal-navigation-item\"\n      [href]=\"item.link\"\n      [target]=\"item.target || '_self'\"\n    >\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </a>\n  }\n\n  <!-- Item with a function -->\n  @if (!item.link && item.function && !item.disabled) {\n    <button\n      class=\"horizontal-navigation-item\"\n      [ngClass]=\"{ 'horizontal-navigation-item-active-forced': item.active }\"\n      (click)=\"item.function(item)\"\n    >\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </button>\n  }\n\n  <!-- Item with an internal link and function -->\n  @if (item.link && !item.externalLink && item.function && !item.disabled) {\n    <button\n      class=\"horizontal-navigation-item\"\n      [ngClass]=\"{ 'horizontal-navigation-item-active-forced': item.active }\"\n      [routerLink]=\"[item.link]\"\n      [fragment]=\"item.fragment\"\n      [preserveFragment]=\"item.preserveFragment ?? false\"\n      [queryParams]=\"item.queryParams\"\n      [queryParamsHandling]=\"item.queryParamsHandling\"\n      [routerLinkActive]=\"'horizontal-navigation-item-active'\"\n      [routerLinkActiveOptions]=\"isActiveMatchOptions\"\n      (click)=\"item.function(item)\"\n    >\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </button>\n  }\n\n  <!-- Item with an external link and function -->\n  @if (item.link && item.externalLink && item.function && !item.disabled) {\n    <a\n      class=\"horizontal-navigation-item\"\n      [href]=\"item.link\"\n      [target]=\"item.target || '_self'\"\n      (click)=\"item.function(item)\"\n    >\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </a>\n  }\n\n  <!-- Item with a no link and no function -->\n  @if (!item.link && !item.function && !item.disabled) {\n    <div\n      class=\"horizontal-navigation-item\"\n      [ngClass]=\"{ 'horizontal-navigation-item-active-forced': item.active }\"\n    >\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </div>\n  }\n\n  <!-- Item is disabled -->\n  @if (item.disabled) {\n    <div class=\"horizontal-navigation-item horizontal-navigation-item-disabled\">\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </div>\n  }\n</div>\n\n<!-- Item template -->\n<ng-template #itemTemplate>\n  <!-- Icon -->\n  @if (item.icon) {\n    <svg-icon\n      class=\"horizontal-navigation-item-icon\"\n      [ngClass]=\"item.classes?.icon\"\n      [name]=\"item.icon\"\n    />\n  }\n\n  <!-- Title & Subtitle -->\n  <div class=\"horizontal-navigation-item-title-wrapper\">\n    <div class=\"horizontal-navigation-item-title\">\n      <span [ngClass]=\"item.classes?.title\">\n        {{ item.title }}\n      </span>\n    </div>\n    @if (item.subtitle) {\n      <div class=\"horizontal-navigation-item-subtitle text-hint\">\n        <span [ngClass]=\"item.classes?.subtitle\">\n          {{ item.subtitle }}\n        </span>\n      </div>\n    }\n  </div>\n\n  <!-- Badge -->\n  @if (item.badge) {\n    <div class=\"horizontal-navigation-item-badge\">\n      <div\n        class=\"horizontal-navigation-item-badge-content\"\n        [ngClass]=\"item.badge.classes\"\n      >\n        {{ item.badge.title }}\n      </div>\n    </div>\n  }\n</ng-template>\n", dependencies: [{ kind: "directive", type: NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: RouterLink, selector: "[routerLink]", inputs: ["target", "queryParams", "fragment", "queryParamsHandling", "state", "info", "relativeTo", "preserveFragment", "skipLocationChange", "replaceUrl", "routerLink"] }, { kind: "directive", type: RouterLinkActive, selector: "[routerLinkActive]", inputs: ["routerLinkActiveOptions", "ariaCurrentWhenActive", "routerLinkActive"], outputs: ["isActiveChange"], exportAs: ["routerLinkActive"] }, { kind: "ngmodule", type: SvgIconModule }, { kind: "component", type: i2.SvgIcon, selector: "svg-icon", inputs: ["inline", "name", "fontSet", "fontIcon"], exportAs: ["svgIcon"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.13", ngImport: i0, type: HorizontalNavigationBasicItemComponent, decorators: [{
            type: Component,
            args: [{ selector: 'horizontal-navigation-basic-item', changeDetection: ChangeDetectionStrategy.OnPush, standalone: true, imports: [NgClass, NgTemplateOutlet, RouterLink, RouterLinkActive, SvgIconModule], template: "<!-- Item wrapper -->\n<div\n  class=\"horizontal-navigation-item-wrapper\"\n  [class.horizontal-navigation-item-has-subtitle]=\"!!item.subtitle\"\n  [ngClass]=\"item.classes?.wrapper\"\n>\n  <!-- Item with an internal link -->\n  @if (item.link && !item.externalLink && !item.function && !item.disabled) {\n    <div\n      class=\"horizontal-navigation-item\"\n      [ngClass]=\"{ 'horizontal-navigation-item-active-forced': item.active }\"\n      [routerLink]=\"[item.link]\"\n      [fragment]=\"item.fragment\"\n      [preserveFragment]=\"item.preserveFragment ?? false\"\n      [queryParams]=\"item.queryParams\"\n      [queryParamsHandling]=\"item.queryParamsHandling\"\n      [routerLinkActive]=\"'horizontal-navigation-item-active'\"\n      [routerLinkActiveOptions]=\"isActiveMatchOptions\"\n    >\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </div>\n  }\n\n  <!-- Item with an external link -->\n  @if (item.link && item.externalLink && !item.function && !item.disabled) {\n    <a\n      class=\"horizontal-navigation-item\"\n      [href]=\"item.link\"\n      [target]=\"item.target || '_self'\"\n    >\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </a>\n  }\n\n  <!-- Item with a function -->\n  @if (!item.link && item.function && !item.disabled) {\n    <button\n      class=\"horizontal-navigation-item\"\n      [ngClass]=\"{ 'horizontal-navigation-item-active-forced': item.active }\"\n      (click)=\"item.function(item)\"\n    >\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </button>\n  }\n\n  <!-- Item with an internal link and function -->\n  @if (item.link && !item.externalLink && item.function && !item.disabled) {\n    <button\n      class=\"horizontal-navigation-item\"\n      [ngClass]=\"{ 'horizontal-navigation-item-active-forced': item.active }\"\n      [routerLink]=\"[item.link]\"\n      [fragment]=\"item.fragment\"\n      [preserveFragment]=\"item.preserveFragment ?? false\"\n      [queryParams]=\"item.queryParams\"\n      [queryParamsHandling]=\"item.queryParamsHandling\"\n      [routerLinkActive]=\"'horizontal-navigation-item-active'\"\n      [routerLinkActiveOptions]=\"isActiveMatchOptions\"\n      (click)=\"item.function(item)\"\n    >\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </button>\n  }\n\n  <!-- Item with an external link and function -->\n  @if (item.link && item.externalLink && item.function && !item.disabled) {\n    <a\n      class=\"horizontal-navigation-item\"\n      [href]=\"item.link\"\n      [target]=\"item.target || '_self'\"\n      (click)=\"item.function(item)\"\n    >\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </a>\n  }\n\n  <!-- Item with a no link and no function -->\n  @if (!item.link && !item.function && !item.disabled) {\n    <div\n      class=\"horizontal-navigation-item\"\n      [ngClass]=\"{ 'horizontal-navigation-item-active-forced': item.active }\"\n    >\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </div>\n  }\n\n  <!-- Item is disabled -->\n  @if (item.disabled) {\n    <div class=\"horizontal-navigation-item horizontal-navigation-item-disabled\">\n      <ng-container *ngTemplateOutlet=\"itemTemplate\" />\n    </div>\n  }\n</div>\n\n<!-- Item template -->\n<ng-template #itemTemplate>\n  <!-- Icon -->\n  @if (item.icon) {\n    <svg-icon\n      class=\"horizontal-navigation-item-icon\"\n      [ngClass]=\"item.classes?.icon\"\n      [name]=\"item.icon\"\n    />\n  }\n\n  <!-- Title & Subtitle -->\n  <div class=\"horizontal-navigation-item-title-wrapper\">\n    <div class=\"horizontal-navigation-item-title\">\n      <span [ngClass]=\"item.classes?.title\">\n        {{ item.title }}\n      </span>\n    </div>\n    @if (item.subtitle) {\n      <div class=\"horizontal-navigation-item-subtitle text-hint\">\n        <span [ngClass]=\"item.classes?.subtitle\">\n          {{ item.subtitle }}\n        </span>\n      </div>\n    }\n  </div>\n\n  <!-- Badge -->\n  @if (item.badge) {\n    <div class=\"horizontal-navigation-item-badge\">\n      <div\n        class=\"horizontal-navigation-item-badge-content\"\n        [ngClass]=\"item.badge.classes\"\n      >\n        {{ item.badge.title }}\n      </div>\n    </div>\n  }\n</ng-template>\n" }]
        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }, { type: i1.NavigationService }], propDecorators: { item: [{
                type: Input
            }], name: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9uYXZpZ2F0aW9uL3NyYy9saWIvaG9yaXpvbnRhbC9jb21wb25lbnRzL2Jhc2ljL2Jhc2ljLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvbmF2aWdhdGlvbi9zcmMvbGliL2hvcml6b250YWwvY29tcG9uZW50cy9iYXNpYy9iYXNpYy5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDNUQsT0FBTyxFQUNMLHVCQUF1QixFQUV2QixTQUFTLEVBQ1QsS0FBSyxHQUdOLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBd0IsVUFBVSxFQUFFLGdCQUFnQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDckYsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRS9DLE9BQU8sRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRzFDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQzs7OztBQVVwRCxNQUFNLE9BQU8sc0NBQXNDO0lBVXZDO0lBQ0E7SUFWRCxJQUFJLENBQWlCO0lBQ3JCLElBQUksQ0FBUztJQUV0QixvQkFBb0IsQ0FBdUI7SUFFbkMsOEJBQThCLENBQWdDO0lBQzlELGVBQWUsR0FBaUIsSUFBSSxPQUFPLEVBQU8sQ0FBQztJQUUzRCxZQUNVLGtCQUFxQyxFQUNyQyxrQkFBcUM7UUFEckMsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFtQjtRQUNyQyx1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW1CO1FBRTdDLDRFQUE0RTtRQUM1RSxxRUFBcUU7UUFDckUsOEVBQThFO1FBQzlFLHdDQUF3QztRQUN4QyxJQUFJLENBQUMsb0JBQW9CLEdBQUcsV0FBVyxDQUFDLGtCQUFrQixDQUFDO0lBQzdELENBQUM7SUFFRCx3R0FBd0c7SUFDeEcsb0JBQW9CO0lBQ3BCLHdHQUF3RztJQUV4RyxRQUFRO1FBQ04sb0RBQW9EO1FBQ3BELG1EQUFtRDtRQUNuRCw2QkFBNkI7UUFDN0IsSUFBSSxDQUFDLG9CQUFvQjtZQUN2QixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsb0JBQW9CLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQ3RELENBQUMsQ0FBQyxXQUFXLENBQUMsaUJBQWlCO2dCQUMvQixDQUFDLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDO1FBRXJDLHNDQUFzQztRQUN0QyxJQUFJLENBQUMsOEJBQThCLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFdEYsaUJBQWlCO1FBQ2pCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUV2Qyx1REFBdUQ7UUFDdkQsSUFBSSxDQUFDLDhCQUE4QixDQUFDLFdBQVc7YUFDNUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7YUFDckMsU0FBUyxDQUFDLEdBQUcsRUFBRTtZQUNkLGlCQUFpQjtZQUNqQixJQUFJLENBQUMsa0JBQWtCLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDekMsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsV0FBVztRQUNULElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDbEMsQ0FBQzt3R0FuRFUsc0NBQXNDOzRGQUF0QyxzQ0FBc0Msb0lDekJuRCx5cElBb0lBLDRDRDdHWSxPQUFPLG9GQUFFLGdCQUFnQixvSkFBRSxVQUFVLG9PQUFFLGdCQUFnQiw2TUFBRSxhQUFhOzs0RkFFckUsc0NBQXNDO2tCQVBsRCxTQUFTOytCQUNFLGtDQUFrQyxtQkFFM0IsdUJBQXVCLENBQUMsTUFBTSxjQUNuQyxJQUFJLFdBQ1AsQ0FBQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsVUFBVSxFQUFFLGdCQUFnQixFQUFFLGFBQWEsQ0FBQztzSEFHeEUsSUFBSTtzQkFBWixLQUFLO2dCQUNHLElBQUk7c0JBQVosS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5nQ2xhc3MsIE5nVGVtcGxhdGVPdXRsZXQgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBJc0FjdGl2ZU1hdGNoT3B0aW9ucywgUm91dGVyTGluaywgUm91dGVyTGlua0FjdGl2ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBTdmdJY29uTW9kdWxlIH0gZnJvbSAnQGxpYnMvc3ZnLWljb24nO1xuXG5pbXBvcnQgeyBTdWJqZWN0LCB0YWtlVW50aWwgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IE5hdmlnYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vbmF2aWdhdGlvbi5zZXJ2aWNlJztcbmltcG9ydCB7IE5hdmlnYXRpb25JdGVtIH0gZnJvbSAnLi4vLi4vLi4vbmF2aWdhdGlvbi50eXBlcyc7XG5pbXBvcnQgeyBVdGlsc0hlbHBlciB9IGZyb20gJy4uLy4uLy4uL3V0aWxzLmhlbHBlcic7XG5pbXBvcnQgeyBIb3Jpem9udGFsTmF2aWdhdGlvbkNvbXBvbmVudCB9IGZyb20gJy4uLy4uL2hvcml6b250YWwuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnaG9yaXpvbnRhbC1uYXZpZ2F0aW9uLWJhc2ljLWl0ZW0nLFxuICB0ZW1wbGF0ZVVybDogJy4vYmFzaWMuY29tcG9uZW50Lmh0bWwnLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW05nQ2xhc3MsIE5nVGVtcGxhdGVPdXRsZXQsIFJvdXRlckxpbmssIFJvdXRlckxpbmtBY3RpdmUsIFN2Z0ljb25Nb2R1bGVdLFxufSlcbmV4cG9ydCBjbGFzcyBIb3Jpem9udGFsTmF2aWdhdGlvbkJhc2ljSXRlbUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25EZXN0cm95IHtcbiAgQElucHV0KCkgaXRlbTogTmF2aWdhdGlvbkl0ZW07XG4gIEBJbnB1dCgpIG5hbWU6IHN0cmluZztcblxuICBpc0FjdGl2ZU1hdGNoT3B0aW9uczogSXNBY3RpdmVNYXRjaE9wdGlvbnM7XG5cbiAgcHJpdmF0ZSBfaG9yaXpvbnRhbE5hdmlnYXRpb25Db21wb25lbnQ6IEhvcml6b250YWxOYXZpZ2F0aW9uQ29tcG9uZW50O1xuICBwcml2YXRlIF91bnN1YnNjcmliZUFsbDogU3ViamVjdDxhbnk+ID0gbmV3IFN1YmplY3Q8YW55PigpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2NoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBwcml2YXRlIF9uYXZpZ2F0aW9uU2VydmljZTogTmF2aWdhdGlvblNlcnZpY2VcbiAgKSB7XG4gICAgLy8gU2V0IHRoZSBlcXVpdmFsZW50IG9mIHtleGFjdDogZmFsc2V9IGFzIGRlZmF1bHQgZm9yIGFjdGl2ZSBtYXRjaCBvcHRpb25zLlxuICAgIC8vIFdlIGFyZSBub3QgYXNzaWduaW5nIHRoZSBpdGVtLmlzQWN0aXZlTWF0Y2hPcHRpb25zIGRpcmVjdGx5IHRvIHRoZVxuICAgIC8vIFtyb3V0ZXJMaW5rQWN0aXZlT3B0aW9uc10gYmVjYXVzZSBpZiBpdCdzIFwidW5kZWZpbmVkXCIgaW5pdGlhbGx5LCB0aGUgcm91dGVyXG4gICAgLy8gd2lsbCB0aHJvdyBhbiBlcnJvciBhbmQgc3RvcCB3b3JraW5nLlxuICAgIHRoaXMuaXNBY3RpdmVNYXRjaE9wdGlvbnMgPSBVdGlsc0hlbHBlci5zdWJzZXRNYXRjaE9wdGlvbnM7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBAIExpZmVjeWNsZSBob29rc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIC8vIFNldCB0aGUgXCJpc0FjdGl2ZU1hdGNoT3B0aW9uc1wiIGVpdGhlciBmcm9tIGl0ZW0nc1xuICAgIC8vIFwiaXNBY3RpdmVNYXRjaE9wdGlvbnNcIiBvciB0aGUgZXF1aXZhbGVudCBmb3JtIG9mXG4gICAgLy8gaXRlbSdzIFwiZXhhY3RNYXRjaFwiIG9wdGlvblxuICAgIHRoaXMuaXNBY3RpdmVNYXRjaE9wdGlvbnMgPVxuICAgICAgKHRoaXMuaXRlbS5pc0FjdGl2ZU1hdGNoT3B0aW9ucyA/PyB0aGlzLml0ZW0uZXhhY3RNYXRjaClcbiAgICAgICAgPyBVdGlsc0hlbHBlci5leGFjdE1hdGNoT3B0aW9uc1xuICAgICAgICA6IFV0aWxzSGVscGVyLnN1YnNldE1hdGNoT3B0aW9ucztcblxuICAgIC8vIEdldCB0aGUgcGFyZW50IG5hdmlnYXRpb24gY29tcG9uZW50XG4gICAgdGhpcy5faG9yaXpvbnRhbE5hdmlnYXRpb25Db21wb25lbnQgPSB0aGlzLl9uYXZpZ2F0aW9uU2VydmljZS5nZXRDb21wb25lbnQodGhpcy5uYW1lKTtcblxuICAgIC8vIE1hcmsgZm9yIGNoZWNrXG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG5cbiAgICAvLyBTdWJzY3JpYmUgdG8gb25SZWZyZXNoZWQgb24gdGhlIG5hdmlnYXRpb24gY29tcG9uZW50XG4gICAgdGhpcy5faG9yaXpvbnRhbE5hdmlnYXRpb25Db21wb25lbnQub25SZWZyZXNoZWRcbiAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLl91bnN1YnNjcmliZUFsbCkpXG4gICAgICAuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgLy8gTWFyayBmb3IgY2hlY2tcbiAgICAgICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuX3Vuc3Vic2NyaWJlQWxsLm5leHQobnVsbCk7XG4gICAgdGhpcy5fdW5zdWJzY3JpYmVBbGwuY29tcGxldGUoKTtcbiAgfVxufVxuIiwiPCEtLSBJdGVtIHdyYXBwZXIgLS0+XG48ZGl2XG4gIGNsYXNzPVwiaG9yaXpvbnRhbC1uYXZpZ2F0aW9uLWl0ZW0td3JhcHBlclwiXG4gIFtjbGFzcy5ob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbS1oYXMtc3VidGl0bGVdPVwiISFpdGVtLnN1YnRpdGxlXCJcbiAgW25nQ2xhc3NdPVwiaXRlbS5jbGFzc2VzPy53cmFwcGVyXCJcbj5cbiAgPCEtLSBJdGVtIHdpdGggYW4gaW50ZXJuYWwgbGluayAtLT5cbiAgQGlmIChpdGVtLmxpbmsgJiYgIWl0ZW0uZXh0ZXJuYWxMaW5rICYmICFpdGVtLmZ1bmN0aW9uICYmICFpdGVtLmRpc2FibGVkKSB7XG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbVwiXG4gICAgICBbbmdDbGFzc109XCJ7ICdob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbS1hY3RpdmUtZm9yY2VkJzogaXRlbS5hY3RpdmUgfVwiXG4gICAgICBbcm91dGVyTGlua109XCJbaXRlbS5saW5rXVwiXG4gICAgICBbZnJhZ21lbnRdPVwiaXRlbS5mcmFnbWVudFwiXG4gICAgICBbcHJlc2VydmVGcmFnbWVudF09XCJpdGVtLnByZXNlcnZlRnJhZ21lbnQgPz8gZmFsc2VcIlxuICAgICAgW3F1ZXJ5UGFyYW1zXT1cIml0ZW0ucXVlcnlQYXJhbXNcIlxuICAgICAgW3F1ZXJ5UGFyYW1zSGFuZGxpbmddPVwiaXRlbS5xdWVyeVBhcmFtc0hhbmRsaW5nXCJcbiAgICAgIFtyb3V0ZXJMaW5rQWN0aXZlXT1cIidob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbS1hY3RpdmUnXCJcbiAgICAgIFtyb3V0ZXJMaW5rQWN0aXZlT3B0aW9uc109XCJpc0FjdGl2ZU1hdGNoT3B0aW9uc1wiXG4gICAgPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cIml0ZW1UZW1wbGF0ZVwiIC8+XG4gICAgPC9kaXY+XG4gIH1cblxuICA8IS0tIEl0ZW0gd2l0aCBhbiBleHRlcm5hbCBsaW5rIC0tPlxuICBAaWYgKGl0ZW0ubGluayAmJiBpdGVtLmV4dGVybmFsTGluayAmJiAhaXRlbS5mdW5jdGlvbiAmJiAhaXRlbS5kaXNhYmxlZCkge1xuICAgIDxhXG4gICAgICBjbGFzcz1cImhvcml6b250YWwtbmF2aWdhdGlvbi1pdGVtXCJcbiAgICAgIFtocmVmXT1cIml0ZW0ubGlua1wiXG4gICAgICBbdGFyZ2V0XT1cIml0ZW0udGFyZ2V0IHx8ICdfc2VsZidcIlxuICAgID5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJpdGVtVGVtcGxhdGVcIiAvPlxuICAgIDwvYT5cbiAgfVxuXG4gIDwhLS0gSXRlbSB3aXRoIGEgZnVuY3Rpb24gLS0+XG4gIEBpZiAoIWl0ZW0ubGluayAmJiBpdGVtLmZ1bmN0aW9uICYmICFpdGVtLmRpc2FibGVkKSB7XG4gICAgPGJ1dHRvblxuICAgICAgY2xhc3M9XCJob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbVwiXG4gICAgICBbbmdDbGFzc109XCJ7ICdob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbS1hY3RpdmUtZm9yY2VkJzogaXRlbS5hY3RpdmUgfVwiXG4gICAgICAoY2xpY2spPVwiaXRlbS5mdW5jdGlvbihpdGVtKVwiXG4gICAgPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cIml0ZW1UZW1wbGF0ZVwiIC8+XG4gICAgPC9idXR0b24+XG4gIH1cblxuICA8IS0tIEl0ZW0gd2l0aCBhbiBpbnRlcm5hbCBsaW5rIGFuZCBmdW5jdGlvbiAtLT5cbiAgQGlmIChpdGVtLmxpbmsgJiYgIWl0ZW0uZXh0ZXJuYWxMaW5rICYmIGl0ZW0uZnVuY3Rpb24gJiYgIWl0ZW0uZGlzYWJsZWQpIHtcbiAgICA8YnV0dG9uXG4gICAgICBjbGFzcz1cImhvcml6b250YWwtbmF2aWdhdGlvbi1pdGVtXCJcbiAgICAgIFtuZ0NsYXNzXT1cInsgJ2hvcml6b250YWwtbmF2aWdhdGlvbi1pdGVtLWFjdGl2ZS1mb3JjZWQnOiBpdGVtLmFjdGl2ZSB9XCJcbiAgICAgIFtyb3V0ZXJMaW5rXT1cIltpdGVtLmxpbmtdXCJcbiAgICAgIFtmcmFnbWVudF09XCJpdGVtLmZyYWdtZW50XCJcbiAgICAgIFtwcmVzZXJ2ZUZyYWdtZW50XT1cIml0ZW0ucHJlc2VydmVGcmFnbWVudCA/PyBmYWxzZVwiXG4gICAgICBbcXVlcnlQYXJhbXNdPVwiaXRlbS5xdWVyeVBhcmFtc1wiXG4gICAgICBbcXVlcnlQYXJhbXNIYW5kbGluZ109XCJpdGVtLnF1ZXJ5UGFyYW1zSGFuZGxpbmdcIlxuICAgICAgW3JvdXRlckxpbmtBY3RpdmVdPVwiJ2hvcml6b250YWwtbmF2aWdhdGlvbi1pdGVtLWFjdGl2ZSdcIlxuICAgICAgW3JvdXRlckxpbmtBY3RpdmVPcHRpb25zXT1cImlzQWN0aXZlTWF0Y2hPcHRpb25zXCJcbiAgICAgIChjbGljayk9XCJpdGVtLmZ1bmN0aW9uKGl0ZW0pXCJcbiAgICA+XG4gICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiaXRlbVRlbXBsYXRlXCIgLz5cbiAgICA8L2J1dHRvbj5cbiAgfVxuXG4gIDwhLS0gSXRlbSB3aXRoIGFuIGV4dGVybmFsIGxpbmsgYW5kIGZ1bmN0aW9uIC0tPlxuICBAaWYgKGl0ZW0ubGluayAmJiBpdGVtLmV4dGVybmFsTGluayAmJiBpdGVtLmZ1bmN0aW9uICYmICFpdGVtLmRpc2FibGVkKSB7XG4gICAgPGFcbiAgICAgIGNsYXNzPVwiaG9yaXpvbnRhbC1uYXZpZ2F0aW9uLWl0ZW1cIlxuICAgICAgW2hyZWZdPVwiaXRlbS5saW5rXCJcbiAgICAgIFt0YXJnZXRdPVwiaXRlbS50YXJnZXQgfHwgJ19zZWxmJ1wiXG4gICAgICAoY2xpY2spPVwiaXRlbS5mdW5jdGlvbihpdGVtKVwiXG4gICAgPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cIml0ZW1UZW1wbGF0ZVwiIC8+XG4gICAgPC9hPlxuICB9XG5cbiAgPCEtLSBJdGVtIHdpdGggYSBubyBsaW5rIGFuZCBubyBmdW5jdGlvbiAtLT5cbiAgQGlmICghaXRlbS5saW5rICYmICFpdGVtLmZ1bmN0aW9uICYmICFpdGVtLmRpc2FibGVkKSB7XG4gICAgPGRpdlxuICAgICAgY2xhc3M9XCJob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbVwiXG4gICAgICBbbmdDbGFzc109XCJ7ICdob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbS1hY3RpdmUtZm9yY2VkJzogaXRlbS5hY3RpdmUgfVwiXG4gICAgPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cIml0ZW1UZW1wbGF0ZVwiIC8+XG4gICAgPC9kaXY+XG4gIH1cblxuICA8IS0tIEl0ZW0gaXMgZGlzYWJsZWQgLS0+XG4gIEBpZiAoaXRlbS5kaXNhYmxlZCkge1xuICAgIDxkaXYgY2xhc3M9XCJob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbSBob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbS1kaXNhYmxlZFwiPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cIml0ZW1UZW1wbGF0ZVwiIC8+XG4gICAgPC9kaXY+XG4gIH1cbjwvZGl2PlxuXG48IS0tIEl0ZW0gdGVtcGxhdGUgLS0+XG48bmctdGVtcGxhdGUgI2l0ZW1UZW1wbGF0ZT5cbiAgPCEtLSBJY29uIC0tPlxuICBAaWYgKGl0ZW0uaWNvbikge1xuICAgIDxzdmctaWNvblxuICAgICAgY2xhc3M9XCJob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbS1pY29uXCJcbiAgICAgIFtuZ0NsYXNzXT1cIml0ZW0uY2xhc3Nlcz8uaWNvblwiXG4gICAgICBbbmFtZV09XCJpdGVtLmljb25cIlxuICAgIC8+XG4gIH1cblxuICA8IS0tIFRpdGxlICYgU3VidGl0bGUgLS0+XG4gIDxkaXYgY2xhc3M9XCJob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbS10aXRsZS13cmFwcGVyXCI+XG4gICAgPGRpdiBjbGFzcz1cImhvcml6b250YWwtbmF2aWdhdGlvbi1pdGVtLXRpdGxlXCI+XG4gICAgICA8c3BhbiBbbmdDbGFzc109XCJpdGVtLmNsYXNzZXM/LnRpdGxlXCI+XG4gICAgICAgIHt7IGl0ZW0udGl0bGUgfX1cbiAgICAgIDwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgICBAaWYgKGl0ZW0uc3VidGl0bGUpIHtcbiAgICAgIDxkaXYgY2xhc3M9XCJob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbS1zdWJ0aXRsZSB0ZXh0LWhpbnRcIj5cbiAgICAgICAgPHNwYW4gW25nQ2xhc3NdPVwiaXRlbS5jbGFzc2VzPy5zdWJ0aXRsZVwiPlxuICAgICAgICAgIHt7IGl0ZW0uc3VidGl0bGUgfX1cbiAgICAgICAgPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgfVxuICA8L2Rpdj5cblxuICA8IS0tIEJhZGdlIC0tPlxuICBAaWYgKGl0ZW0uYmFkZ2UpIHtcbiAgICA8ZGl2IGNsYXNzPVwiaG9yaXpvbnRhbC1uYXZpZ2F0aW9uLWl0ZW0tYmFkZ2VcIj5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3M9XCJob3Jpem9udGFsLW5hdmlnYXRpb24taXRlbS1iYWRnZS1jb250ZW50XCJcbiAgICAgICAgW25nQ2xhc3NdPVwiaXRlbS5iYWRnZS5jbGFzc2VzXCJcbiAgICAgID5cbiAgICAgICAge3sgaXRlbS5iYWRnZS50aXRsZSB9fVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIH1cbjwvbmctdGVtcGxhdGU+XG4iXX0=