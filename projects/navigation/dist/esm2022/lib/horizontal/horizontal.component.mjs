import { ChangeDetectionStrategy, Component, Input, ViewEncapsulation, } from '@angular/core';
import { ReplaySubject, Subject } from 'rxjs';
import { UtilsHelper } from '../utils.helper';
import { HorizontalNavigationBasicItemComponent } from './components/basic/basic.component';
import { HorizontalNavigationBranchItemComponent } from './components/branch/branch.component';
import { HorizontalNavigationSpacerItemComponent } from './components/spacer/spacer.component';
import * as i0 from "@angular/core";
import * as i1 from "../navigation.service";
export class HorizontalNavigationComponent {
    _changeDetectorRef;
    _navigationService;
    name = UtilsHelper.randomId();
    navigation;
    onRefreshed = new ReplaySubject(1);
    _unsubscribeAll = new Subject();
    /**
     * Constructor
     */
    constructor(_changeDetectorRef, _navigationService) {
        this._changeDetectorRef = _changeDetectorRef;
        this._navigationService = _navigationService;
    }
    // -----------------------------------------------------------------------------------------------------
    // @ Lifecycle hooks
    // -----------------------------------------------------------------------------------------------------
    ngOnChanges(changes) {
        // Navigation
        if ('navigation' in changes) {
            // Mark for check
            this._changeDetectorRef.markForCheck();
        }
    }
    ngOnInit() {
        // Make sure the name input is not an empty string
        if (this.name === '') {
            this.name = UtilsHelper.randomId();
        }
        // Register the navigation component
        this._navigationService.registerComponent(this.name, this);
    }
    ngOnDestroy() {
        // Deregister the navigation component from the registry
        this._navigationService.deregisterComponent(this.name);
        // Unsubscribe from all subscriptions
        this._unsubscribeAll.next(null);
        this._unsubscribeAll.complete();
    }
    // -----------------------------------------------------------------------------------------------------
    // @ Public methods
    // -----------------------------------------------------------------------------------------------------
    refresh() {
        this._changeDetectorRef.markForCheck();
        this.onRefreshed.next(true);
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "18.2.8", ngImport: i0, type: HorizontalNavigationComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i1.NavigationService }], target: i0.ɵɵFactoryTarget.Component });
    static ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "18.2.8", type: HorizontalNavigationComponent, isStandalone: true, selector: "horizontal-navigation", inputs: { name: "name", navigation: "navigation" }, exportAs: ["horizontalNavigation"], usesOnChanges: true, ngImport: i0, template: "<div class=\"horizontal-navigation-wrapper\">\n  @for (item of navigation; track item.id) {\n    <!-- Skip the hidden items -->\n    @if ((item.hidden && !item.hidden(item)) || !item.hidden) {\n      <!-- Basic -->\n      @if (item.type === 'basic') {\n        <horizontal-navigation-basic-item\n          class=\"horizontal-navigation-menu-item\"\n          [item]=\"item\"\n          [name]=\"name\"\n        />\n      }\n\n      <!-- Branch: aside, collapsable, group -->\n      @if (item.type === 'aside' || item.type === 'collapsable' || item.type === 'group') {\n        <horizontal-navigation-branch-item\n          class=\"horizontal-navigation-menu-item\"\n          [item]=\"item\"\n          [name]=\"name\"\n        />\n      }\n\n      <!-- Spacer -->\n      @if (item.type === 'spacer') {\n        <horizontal-navigation-spacer-item\n          class=\"horizontal-navigation-menu-item\"\n          [item]=\"item\"\n          [name]=\"name\"\n        />\n      }\n    }\n  }\n</div>\n", styles: ["horizontal-navigation .horizontal-navigation-wrapper{display:flex;align-items:center}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-wrapper,horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-branch-item .horizontal-navigation-item-wrapper{border-radius:4px;overflow:hidden}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-wrapper .horizontal-navigation-item,horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-branch-item .horizontal-navigation-item-wrapper .horizontal-navigation-item{padding:0 16px;cursor:pointer;-webkit-user-select:none;user-select:none}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-wrapper .horizontal-navigation-item .horizontal-navigation-item-icon,horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-branch-item .horizontal-navigation-item-wrapper .horizontal-navigation-item .horizontal-navigation-item-icon{margin-right:12px}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-active .horizontal-navigation-item-title,horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-active-forced .horizontal-navigation-item-title{color:var(--fallback-p, oklch(var(--p)))!important}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-active .horizontal-navigation-item-subtitle,horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-active-forced .horizontal-navigation-item-subtitle{color:var(--fallback-p, oklch(var(--p)))!important}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-active .horizontal-navigation-item-icon,horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-active-forced .horizontal-navigation-item-icon{color:var(--fallback-p, oklch(var(--p)))!important}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-spacer-item{margin:12px 0}.horizontal-navigation-menu-panel .horizontal-navigation-menu-item{height:auto;min-height:0;line-height:normal;white-space:normal}.horizontal-navigation-menu-panel .horizontal-navigation-menu-item horizontal-navigation-basic-item,.horizontal-navigation-menu-panel .horizontal-navigation-menu-item horizontal-navigation-branch-item,.horizontal-navigation-menu-panel .horizontal-navigation-menu-item horizontal-navigation-divider-item{display:flex;flex:1 1 auto}.horizontal-navigation-menu-panel .horizontal-navigation-menu-item horizontal-navigation-divider-item{margin:8px -16px}.horizontal-navigation-menu-panel .horizontal-navigation-menu-item horizontal-navigation-divider-item .horizontal-navigation-item-wrapper{height:1px;box-shadow:0 1px}.horizontal-navigation-menu-item horizontal-navigation-basic-item .horizontal-navigation-item-active .horizontal-navigation-item-title,.horizontal-navigation-menu-item horizontal-navigation-basic-item .horizontal-navigation-item-active-forced .horizontal-navigation-item-title{color:var(--fallback-p, oklch(var(--p)))!important}.horizontal-navigation-menu-item horizontal-navigation-basic-item .horizontal-navigation-item-active .horizontal-navigation-item-subtitle,.horizontal-navigation-menu-item horizontal-navigation-basic-item .horizontal-navigation-item-active-forced .horizontal-navigation-item-subtitle{color:var(--fallback-p, oklch(var(--p)))!important}.horizontal-navigation-menu-item horizontal-navigation-basic-item .horizontal-navigation-item-active .horizontal-navigation-item-icon,.horizontal-navigation-menu-item horizontal-navigation-basic-item .horizontal-navigation-item-active-forced .horizontal-navigation-item-icon{color:var(--fallback-p, oklch(var(--p)))!important}.horizontal-navigation-menu-item .horizontal-navigation-item-wrapper{width:100%}.horizontal-navigation-menu-item .horizontal-navigation-item-wrapper.horizontal-navigation-item-has-subtitle .horizontal-navigation-item{min-height:56px}.horizontal-navigation-menu-item .horizontal-navigation-item-wrapper .horizontal-navigation-item{position:relative;display:flex;align-items:center;justify-content:flex-start;min-height:48px;width:100%;font-size:13px;font-weight:500;text-decoration:none}.horizontal-navigation-menu-item .horizontal-navigation-item-wrapper .horizontal-navigation-item .horizontal-navigation-item-title-wrapper .horizontal-navigation-item-subtitle{font-size:10px}.horizontal-navigation-menu-item .horizontal-navigation-item-wrapper .horizontal-navigation-item .horizontal-navigation-item-badge{margin-left:auto}.horizontal-navigation-menu-item .horizontal-navigation-item-wrapper .horizontal-navigation-item .horizontal-navigation-item-badge .horizontal-navigation-item-badge-content{display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:600;white-space:nowrap;height:20px}\n"], dependencies: [{ kind: "component", type: HorizontalNavigationBasicItemComponent, selector: "horizontal-navigation-basic-item", inputs: ["item", "name"] }, { kind: "component", type: HorizontalNavigationBranchItemComponent, selector: "horizontal-navigation-branch-item", inputs: ["child", "item", "name"] }, { kind: "component", type: HorizontalNavigationSpacerItemComponent, selector: "horizontal-navigation-spacer-item", inputs: ["item", "name"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush, encapsulation: i0.ViewEncapsulation.None });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "18.2.8", ngImport: i0, type: HorizontalNavigationComponent, decorators: [{
            type: Component,
            args: [{ selector: 'horizontal-navigation', encapsulation: ViewEncapsulation.None, changeDetection: ChangeDetectionStrategy.OnPush, exportAs: 'horizontalNavigation', standalone: true, imports: [
                        HorizontalNavigationBasicItemComponent,
                        HorizontalNavigationBranchItemComponent,
                        HorizontalNavigationSpacerItemComponent,
                    ], template: "<div class=\"horizontal-navigation-wrapper\">\n  @for (item of navigation; track item.id) {\n    <!-- Skip the hidden items -->\n    @if ((item.hidden && !item.hidden(item)) || !item.hidden) {\n      <!-- Basic -->\n      @if (item.type === 'basic') {\n        <horizontal-navigation-basic-item\n          class=\"horizontal-navigation-menu-item\"\n          [item]=\"item\"\n          [name]=\"name\"\n        />\n      }\n\n      <!-- Branch: aside, collapsable, group -->\n      @if (item.type === 'aside' || item.type === 'collapsable' || item.type === 'group') {\n        <horizontal-navigation-branch-item\n          class=\"horizontal-navigation-menu-item\"\n          [item]=\"item\"\n          [name]=\"name\"\n        />\n      }\n\n      <!-- Spacer -->\n      @if (item.type === 'spacer') {\n        <horizontal-navigation-spacer-item\n          class=\"horizontal-navigation-menu-item\"\n          [item]=\"item\"\n          [name]=\"name\"\n        />\n      }\n    }\n  }\n</div>\n", styles: ["horizontal-navigation .horizontal-navigation-wrapper{display:flex;align-items:center}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-wrapper,horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-branch-item .horizontal-navigation-item-wrapper{border-radius:4px;overflow:hidden}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-wrapper .horizontal-navigation-item,horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-branch-item .horizontal-navigation-item-wrapper .horizontal-navigation-item{padding:0 16px;cursor:pointer;-webkit-user-select:none;user-select:none}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-wrapper .horizontal-navigation-item .horizontal-navigation-item-icon,horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-branch-item .horizontal-navigation-item-wrapper .horizontal-navigation-item .horizontal-navigation-item-icon{margin-right:12px}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-active .horizontal-navigation-item-title,horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-active-forced .horizontal-navigation-item-title{color:var(--fallback-p, oklch(var(--p)))!important}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-active .horizontal-navigation-item-subtitle,horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-active-forced .horizontal-navigation-item-subtitle{color:var(--fallback-p, oklch(var(--p)))!important}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-active .horizontal-navigation-item-icon,horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-basic-item .horizontal-navigation-item-active-forced .horizontal-navigation-item-icon{color:var(--fallback-p, oklch(var(--p)))!important}horizontal-navigation .horizontal-navigation-wrapper horizontal-navigation-spacer-item{margin:12px 0}.horizontal-navigation-menu-panel .horizontal-navigation-menu-item{height:auto;min-height:0;line-height:normal;white-space:normal}.horizontal-navigation-menu-panel .horizontal-navigation-menu-item horizontal-navigation-basic-item,.horizontal-navigation-menu-panel .horizontal-navigation-menu-item horizontal-navigation-branch-item,.horizontal-navigation-menu-panel .horizontal-navigation-menu-item horizontal-navigation-divider-item{display:flex;flex:1 1 auto}.horizontal-navigation-menu-panel .horizontal-navigation-menu-item horizontal-navigation-divider-item{margin:8px -16px}.horizontal-navigation-menu-panel .horizontal-navigation-menu-item horizontal-navigation-divider-item .horizontal-navigation-item-wrapper{height:1px;box-shadow:0 1px}.horizontal-navigation-menu-item horizontal-navigation-basic-item .horizontal-navigation-item-active .horizontal-navigation-item-title,.horizontal-navigation-menu-item horizontal-navigation-basic-item .horizontal-navigation-item-active-forced .horizontal-navigation-item-title{color:var(--fallback-p, oklch(var(--p)))!important}.horizontal-navigation-menu-item horizontal-navigation-basic-item .horizontal-navigation-item-active .horizontal-navigation-item-subtitle,.horizontal-navigation-menu-item horizontal-navigation-basic-item .horizontal-navigation-item-active-forced .horizontal-navigation-item-subtitle{color:var(--fallback-p, oklch(var(--p)))!important}.horizontal-navigation-menu-item horizontal-navigation-basic-item .horizontal-navigation-item-active .horizontal-navigation-item-icon,.horizontal-navigation-menu-item horizontal-navigation-basic-item .horizontal-navigation-item-active-forced .horizontal-navigation-item-icon{color:var(--fallback-p, oklch(var(--p)))!important}.horizontal-navigation-menu-item .horizontal-navigation-item-wrapper{width:100%}.horizontal-navigation-menu-item .horizontal-navigation-item-wrapper.horizontal-navigation-item-has-subtitle .horizontal-navigation-item{min-height:56px}.horizontal-navigation-menu-item .horizontal-navigation-item-wrapper .horizontal-navigation-item{position:relative;display:flex;align-items:center;justify-content:flex-start;min-height:48px;width:100%;font-size:13px;font-weight:500;text-decoration:none}.horizontal-navigation-menu-item .horizontal-navigation-item-wrapper .horizontal-navigation-item .horizontal-navigation-item-title-wrapper .horizontal-navigation-item-subtitle{font-size:10px}.horizontal-navigation-menu-item .horizontal-navigation-item-wrapper .horizontal-navigation-item .horizontal-navigation-item-badge{margin-left:auto}.horizontal-navigation-menu-item .horizontal-navigation-item-wrapper .horizontal-navigation-item .horizontal-navigation-item-badge .horizontal-navigation-item-badge-content{display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:600;white-space:nowrap;height:20px}\n"] }]
        }], ctorParameters: () => [{ type: i0.ChangeDetectorRef }, { type: i1.NavigationService }], propDecorators: { name: [{
                type: Input
            }], navigation: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaG9yaXpvbnRhbC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvbGliL2hvcml6b250YWwvaG9yaXpvbnRhbC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9zcmMvbGliL2hvcml6b250YWwvaG9yaXpvbnRhbC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQ0wsdUJBQXVCLEVBRXZCLFNBQVMsRUFDVCxLQUFLLEVBS0wsaUJBQWlCLEdBQ2xCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBRSxhQUFhLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBSzlDLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUM5QyxPQUFPLEVBQUUsc0NBQXNDLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUM1RixPQUFPLEVBQUUsdUNBQXVDLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUMvRixPQUFPLEVBQUUsdUNBQXVDLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQzs7O0FBZ0IvRixNQUFNLE9BQU8sNkJBQTZCO0lBVzlCO0lBQ0E7SUFYRCxJQUFJLEdBQVcsV0FBVyxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ3RDLFVBQVUsQ0FBbUI7SUFFdEMsV0FBVyxHQUEyQixJQUFJLGFBQWEsQ0FBVSxDQUFDLENBQUMsQ0FBQztJQUM1RCxlQUFlLEdBQWlCLElBQUksT0FBTyxFQUFPLENBQUM7SUFFM0Q7O09BRUc7SUFDSCxZQUNVLGtCQUFxQyxFQUNyQyxrQkFBcUM7UUFEckMsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFtQjtRQUNyQyx1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW1CO0lBQzVDLENBQUM7SUFFSix3R0FBd0c7SUFDeEcsb0JBQW9CO0lBQ3BCLHdHQUF3RztJQUV4RyxXQUFXLENBQUMsT0FBc0I7UUFDaEMsYUFBYTtRQUNiLElBQUksWUFBWSxJQUFJLE9BQU8sRUFBRSxDQUFDO1lBQzVCLGlCQUFpQjtZQUNqQixJQUFJLENBQUMsa0JBQWtCLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDekMsQ0FBQztJQUNILENBQUM7SUFFRCxRQUFRO1FBQ04sa0RBQWtEO1FBQ2xELElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFLEVBQUUsQ0FBQztZQUNyQixJQUFJLENBQUMsSUFBSSxHQUFHLFdBQVcsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNyQyxDQUFDO1FBRUQsb0NBQW9DO1FBQ3BDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFFRCxXQUFXO1FBQ1Qsd0RBQXdEO1FBQ3hELElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFdkQscUNBQXFDO1FBQ3JDLElBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDbEMsQ0FBQztJQUVELHdHQUF3RztJQUN4RyxtQkFBbUI7SUFDbkIsd0dBQXdHO0lBRXhHLE9BQU87UUFDTCxJQUFJLENBQUMsa0JBQWtCLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDdkMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDOUIsQ0FBQzt1R0FyRFUsNkJBQTZCOzJGQUE3Qiw2QkFBNkIsOExDbkMxQyxzK0JBaUNBLHVuS0RISSxzQ0FBc0MsdUdBQ3RDLHVDQUF1QyxpSEFDdkMsdUNBQXVDOzsyRkFHOUIsNkJBQTZCO2tCQWR6QyxTQUFTOytCQUNFLHVCQUF1QixpQkFHbEIsaUJBQWlCLENBQUMsSUFBSSxtQkFDcEIsdUJBQXVCLENBQUMsTUFBTSxZQUNyQyxzQkFBc0IsY0FDcEIsSUFBSSxXQUNQO3dCQUNQLHNDQUFzQzt3QkFDdEMsdUNBQXVDO3dCQUN2Qyx1Q0FBdUM7cUJBQ3hDO3NIQUdRLElBQUk7c0JBQVosS0FBSztnQkFDRyxVQUFVO3NCQUFsQixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksXG4gIENoYW5nZURldGVjdG9yUmVmLFxuICBDb21wb25lbnQsXG4gIElucHV0LFxuICBPbkNoYW5nZXMsXG4gIE9uRGVzdHJveSxcbiAgT25Jbml0LFxuICBTaW1wbGVDaGFuZ2VzLFxuICBWaWV3RW5jYXBzdWxhdGlvbixcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSZXBsYXlTdWJqZWN0LCBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7IE5hdmlnYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vbmF2aWdhdGlvbi5zZXJ2aWNlJztcbmltcG9ydCB7IE5hdmlnYXRpb25JdGVtIH0gZnJvbSAnLi4vbmF2aWdhdGlvbi50eXBlcyc7XG5cbmltcG9ydCB7IFV0aWxzSGVscGVyIH0gZnJvbSAnLi4vdXRpbHMuaGVscGVyJztcbmltcG9ydCB7IEhvcml6b250YWxOYXZpZ2F0aW9uQmFzaWNJdGVtQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2Jhc2ljL2Jhc2ljLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBIb3Jpem9udGFsTmF2aWdhdGlvbkJyYW5jaEl0ZW1Db21wb25lbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvYnJhbmNoL2JyYW5jaC5jb21wb25lbnQnO1xuaW1wb3J0IHsgSG9yaXpvbnRhbE5hdmlnYXRpb25TcGFjZXJJdGVtQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL3NwYWNlci9zcGFjZXIuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnaG9yaXpvbnRhbC1uYXZpZ2F0aW9uJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2hvcml6b250YWwuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9ob3Jpem9udGFsLmNvbXBvbmVudC5zY3NzJ10sXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBleHBvcnRBczogJ2hvcml6b250YWxOYXZpZ2F0aW9uJyxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW1xuICAgIEhvcml6b250YWxOYXZpZ2F0aW9uQmFzaWNJdGVtQ29tcG9uZW50LFxuICAgIEhvcml6b250YWxOYXZpZ2F0aW9uQnJhbmNoSXRlbUNvbXBvbmVudCxcbiAgICBIb3Jpem9udGFsTmF2aWdhdGlvblNwYWNlckl0ZW1Db21wb25lbnQsXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIEhvcml6b250YWxOYXZpZ2F0aW9uQ29tcG9uZW50IGltcGxlbWVudHMgT25DaGFuZ2VzLCBPbkluaXQsIE9uRGVzdHJveSB7XG4gIEBJbnB1dCgpIG5hbWU6IHN0cmluZyA9IFV0aWxzSGVscGVyLnJhbmRvbUlkKCk7XG4gIEBJbnB1dCgpIG5hdmlnYXRpb246IE5hdmlnYXRpb25JdGVtW107XG5cbiAgb25SZWZyZXNoZWQ6IFJlcGxheVN1YmplY3Q8Ym9vbGVhbj4gPSBuZXcgUmVwbGF5U3ViamVjdDxib29sZWFuPigxKTtcbiAgcHJpdmF0ZSBfdW5zdWJzY3JpYmVBbGw6IFN1YmplY3Q8YW55PiA9IG5ldyBTdWJqZWN0PGFueT4oKTtcblxuICAvKipcbiAgICogQ29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgX2NoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBwcml2YXRlIF9uYXZpZ2F0aW9uU2VydmljZTogTmF2aWdhdGlvblNlcnZpY2VcbiAgKSB7fVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEAgTGlmZWN5Y2xlIGhvb2tzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIC8vIE5hdmlnYXRpb25cbiAgICBpZiAoJ25hdmlnYXRpb24nIGluIGNoYW5nZXMpIHtcbiAgICAgIC8vIE1hcmsgZm9yIGNoZWNrXG4gICAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICAvLyBNYWtlIHN1cmUgdGhlIG5hbWUgaW5wdXQgaXMgbm90IGFuIGVtcHR5IHN0cmluZ1xuICAgIGlmICh0aGlzLm5hbWUgPT09ICcnKSB7XG4gICAgICB0aGlzLm5hbWUgPSBVdGlsc0hlbHBlci5yYW5kb21JZCgpO1xuICAgIH1cblxuICAgIC8vIFJlZ2lzdGVyIHRoZSBuYXZpZ2F0aW9uIGNvbXBvbmVudFxuICAgIHRoaXMuX25hdmlnYXRpb25TZXJ2aWNlLnJlZ2lzdGVyQ29tcG9uZW50KHRoaXMubmFtZSwgdGhpcyk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICAvLyBEZXJlZ2lzdGVyIHRoZSBuYXZpZ2F0aW9uIGNvbXBvbmVudCBmcm9tIHRoZSByZWdpc3RyeVxuICAgIHRoaXMuX25hdmlnYXRpb25TZXJ2aWNlLmRlcmVnaXN0ZXJDb21wb25lbnQodGhpcy5uYW1lKTtcblxuICAgIC8vIFVuc3Vic2NyaWJlIGZyb20gYWxsIHN1YnNjcmlwdGlvbnNcbiAgICB0aGlzLl91bnN1YnNjcmliZUFsbC5uZXh0KG51bGwpO1xuICAgIHRoaXMuX3Vuc3Vic2NyaWJlQWxsLmNvbXBsZXRlKCk7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvLyBAIFB1YmxpYyBtZXRob2RzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgcmVmcmVzaCgpOiB2b2lkIHtcbiAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICB0aGlzLm9uUmVmcmVzaGVkLm5leHQodHJ1ZSk7XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJob3Jpem9udGFsLW5hdmlnYXRpb24td3JhcHBlclwiPlxuICBAZm9yIChpdGVtIG9mIG5hdmlnYXRpb247IHRyYWNrIGl0ZW0uaWQpIHtcbiAgICA8IS0tIFNraXAgdGhlIGhpZGRlbiBpdGVtcyAtLT5cbiAgICBAaWYgKChpdGVtLmhpZGRlbiAmJiAhaXRlbS5oaWRkZW4oaXRlbSkpIHx8ICFpdGVtLmhpZGRlbikge1xuICAgICAgPCEtLSBCYXNpYyAtLT5cbiAgICAgIEBpZiAoaXRlbS50eXBlID09PSAnYmFzaWMnKSB7XG4gICAgICAgIDxob3Jpem9udGFsLW5hdmlnYXRpb24tYmFzaWMtaXRlbVxuICAgICAgICAgIGNsYXNzPVwiaG9yaXpvbnRhbC1uYXZpZ2F0aW9uLW1lbnUtaXRlbVwiXG4gICAgICAgICAgW2l0ZW1dPVwiaXRlbVwiXG4gICAgICAgICAgW25hbWVdPVwibmFtZVwiXG4gICAgICAgIC8+XG4gICAgICB9XG5cbiAgICAgIDwhLS0gQnJhbmNoOiBhc2lkZSwgY29sbGFwc2FibGUsIGdyb3VwIC0tPlxuICAgICAgQGlmIChpdGVtLnR5cGUgPT09ICdhc2lkZScgfHwgaXRlbS50eXBlID09PSAnY29sbGFwc2FibGUnIHx8IGl0ZW0udHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgICA8aG9yaXpvbnRhbC1uYXZpZ2F0aW9uLWJyYW5jaC1pdGVtXG4gICAgICAgICAgY2xhc3M9XCJob3Jpem9udGFsLW5hdmlnYXRpb24tbWVudS1pdGVtXCJcbiAgICAgICAgICBbaXRlbV09XCJpdGVtXCJcbiAgICAgICAgICBbbmFtZV09XCJuYW1lXCJcbiAgICAgICAgLz5cbiAgICAgIH1cblxuICAgICAgPCEtLSBTcGFjZXIgLS0+XG4gICAgICBAaWYgKGl0ZW0udHlwZSA9PT0gJ3NwYWNlcicpIHtcbiAgICAgICAgPGhvcml6b250YWwtbmF2aWdhdGlvbi1zcGFjZXItaXRlbVxuICAgICAgICAgIGNsYXNzPVwiaG9yaXpvbnRhbC1uYXZpZ2F0aW9uLW1lbnUtaXRlbVwiXG4gICAgICAgICAgW2l0ZW1dPVwiaXRlbVwiXG4gICAgICAgICAgW25hbWVdPVwibmFtZVwiXG4gICAgICAgIC8+XG4gICAgICB9XG4gICAgfVxuICB9XG48L2Rpdj5cbiJdfQ==